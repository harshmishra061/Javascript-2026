// myCall polyfill
// Invoked on a function.
// First argument sets the `this` context.
// Remaining arguments are passed to the function.

Function.prototype.myCall = function (context, ...args) {
  if (typeof this !== "function") {
    throw new TypeError("myCall must be called on a function");
  }

  // Default context
  context = context ?? globalThis;

  // Temporary unique property
  const key = Symbol("fn");
  context[key] = this;

  // Invoke function
  const result = context[key](...args);

  // Cleanup
  delete context[key];

  return result;
};
